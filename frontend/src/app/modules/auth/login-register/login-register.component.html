<div class="main">

    <div class="video-banner">
        <video preload="auto" autoplay loop muted>
            <source src="assets/video/banner_video.mp4" type="video/mp4">
            Sorry, your browser does not support HTML5 video.
        </video>
    </div>

    <div class="content">

        <div class="form">
    
            <!-- Tabs -->
            <ul class="tab-group">
                <li class="tab" [class.active]="!isLoginMode" (click)="setMode(false)">
                    <a href="javascript:void(0)">Register</a>
                </li>
                <li class="tab" [class.active]="isLoginMode" (click)="setMode(true)">
                    <a href="javascript:void(0)">Log In</a>
                </li>
            </ul>
            
            <!-- Tab Content -->
            <div class="tab-content">
    
                <!-- Registro -->
                <div id="signup" [class.active-tab]="!isLoginMode">
                    <h1>Create your account</h1>
                    <form *ngIf="!isLoginMode" [formGroup]="registerForm" (ngSubmit)="onSubmit()">
                        
                        <div class="field-wrap">
                            <label [class.active]="regUsername?.value" [class.highlight]="regUsername?.touched">
                                Username<span class="req">*</span>
                            </label>
                            <input type="text" formControlName="username" required autocomplete="off"/>
                            
                            <div *ngIf="regUsername?.invalid && (regUsername?.dirty || regUsername?.touched)" class="error-feedback">
                                <div *ngIf="regUsername?.errors?.['required']">Username is required.</div>
                                <div *ngIf="regUsername?.errors?.['maxlength']">Username cannot exceed 32 characters.</div>
                                <div *ngIf="regUsername?.errors?.['minlength']">Username must be at least 8 characters long.</div>
                                <div *ngIf="regUsername?.errors?.['usernameTaken']">This username is already taken.</div>
                            </div>

                            <div *ngIf="regUsername?.pending" class="loading-indicator">Checking availability...</div>
                        </div>
                        
                        <div class="field-wrap">
                            <label [class.active]="regEmail?.value" [class.highlight]="regEmail?.touched">
                                Email Address<span class="req">*</span>
                            </label>
                            <input type="email" formControlName="email" required autocomplete="off"/>
                            <div *ngIf="regEmail?.invalid && (regEmail?.dirty || regEmail?.touched)" class="error-feedback">
                                <div *ngIf="regEmail?.errors?.['required']">Email is required.</div>
                                <div *ngIf="regEmail?.errors?.['email']">Please enter a valid email address.</div>
                                <div *ngIf="regEmail?.errors?.['emailTaken']">This email is already registered.</div>
                            </div>
                            <div *ngIf="regEmail?.pending" class="loading-indicator">Checking availability...</div>
                        </div>
                        
                        <div class="field-wrap">
                            <label [class.active]="regPassword?.value" [class.highlight]="regPassword?.touched">
                                Set A Password<span class="req">*</span>
                            </label>
                            <input [type]="registerPasswordVisible ? 'text' : 'password'" formControlName="password" required autocomplete="off"/>
                            
                            <button type="button" class="password-toggle-btn" 
                                (mousedown)="registerPasswordVisible = true" 
                                (mouseup)="registerPasswordVisible = false"
                                (mouseleave)="registerPasswordVisible = false">
                                üëÅ
                            </button>
                            <div *ngIf="regPassword?.invalid && (regPassword?.dirty || regPassword?.touched)" class="error-feedback">
                                <div *ngIf="regPassword?.errors?.['required']">Password is required.</div>
                                <div *ngIf="regPassword?.errors?.['minlength']">Password must be at least 8 characters long.</div>
                                <div *ngIf="regPassword?.errors?.['pattern']">Must contain an uppercase, a lowercase, and a number.</div>
                            </div>
                        </div>

                        <div class="field-wrap">
                            <label [class.active]="regConfirmPassword?.value" [class.highlight]="regConfirmPassword?.touched">
                                Confirm Password<span class="req">*</span>
                            </label>
                            <input [type]="confirmPasswordVisible ? 'text' : 'password'" formControlName="confirmPassword" required autocomplete="off"/>
                            
                            <button type="button" class="password-toggle-btn" 
                                    (mousedown)="confirmPasswordVisible = true" 
                                    (mouseup)="confirmPasswordVisible = false"
                                    (mouseleave)="confirmPasswordVisible = false">
                                üëÅ
                            </button>

                            <div *ngIf="regConfirmPassword?.invalid && (regConfirmPassword?.dirty || regConfirmPassword?.touched)" class="error-feedback">
                                <div *ngIf="regConfirmPassword?.errors?.['required']">Please confirm your password.</div>
                                <div *ngIf="regConfirmPassword?.errors?.['passwordsMismatch']">Passwords do not match.</div>
                            </div>
                        </div>
                        
                        <div *ngIf="errorMessage" class="error-message">
                            {{ errorMessage }}
                        </div>
                        
                        <button type="submit" class="button button-block" [disabled]="registerForm.invalid">
                            Get Started
                        </button>
                    </form>
                </div>
                
                <!-- Login -->
                <div id="login" [class.active-tab]="isLoginMode">
                    <h1>Welcome Back!</h1>
                    <form *ngIf="isLoginMode" [formGroup]="loginForm" (ngSubmit)="onSubmit()">
                        <div class="field-wrap">
                            <label [class.active]="loginForm.get('email')?.value" [class.highlight]="loginForm.get('email')?.touched">
                                Email Address<span class="req">*</span>
                            </label>
                            <input type="email" formControlName="email" required autocomplete="off"/>
                        </div>
                        
                        <div class="field-wrap">
                            <label [class.active]="loginForm.get('password')?.value" [class.highlight]="loginForm.get('password')?.touched">
                                Password<span class="req">*</span>
                            </label>
                            <input type="password" formControlName="password" required autocomplete="off"/>
                        </div>
                        
                        <div *ngIf="errorMessage" class="error-message">
                            {{ errorMessage }}
                        </div>
                        
                        <button class="button button-block" type="submit" [disabled]="loginForm.invalid">
                            Log In
                        </button>
                    </form>
                </div>
    
            </div>
    
        </div>

    </div>

</div>